------------------------------------------------------------
SATIrE: Static Analysis Tool Integration Engine
------------------------------------------------------------

SATIrE integrates static analysis tools into existing compiler
infrastructures.  Currently the focus is on integration of AbsInt's
Program Analysis Generator (PAG), the C/C++ infrastructure LLNL-ROSE,
and support for an external format (reading and writing) in Prolog
term syntax.

* Tested with (under Debian lenny):
  - ROSE 0.9.3a-1593
  - PAG 9.2.2.48
  - flex 2.5.35
  - bison 2.3
  - g++ 4.2.0 (>= 4.2.0 required by ROSE with EDG binaries)
  - Boost 1_36 (>= 1_35 required by ROSE)
  - SWI-Prolog version 5.7.14 for x86_64-linux (optional)

------------------------------------------------------------
(0) UPGRADING AN EXISTING SATIrE INSTALLATION
------------------------------------------------------------

  If you are upgrading from an earlier version of SATIrE

  a) Go to your OLD SATIrE drectory and uninstall the old version
     make uninstall

  you can now continue with 1.b)

------------------------------------------------------------
(1) INSTALLATION
------------------------------------------------------------

 a) Before you can install SATIrE
    i)  you must install LLNL-ROSE - http://www.rosecompiler.org/
    ii) you must install PAG - http://www.absint.com/pag/

 b) Unpack the satire tar-ball with:
    tar xvzf SATIrE-0.8.6.tgz

 c) Go to the satire directory:
    cd SATIrE-0.8.6

 d) Configure the sources for your platform and set the path for ROSE and PAG:

    e.g.    
    ./configure --prefix=/usr/local --with-rosedir=/usr/local/rose/  \
                --with-pagdir=/usr/local/pag

    ./configure --help

    run 'make' for compiling all SATIrE modules and analyzers
    run 'make install' to install SATIrE to the location specified 
      by --prefix=<INSTALL_PREFIX>
    run 'make installcheck' to run SATIrE tests on the installation

------------------------------------------------------------
(2) GETTING STARTED WITH AN ANALYSIS THAT COMES WITH SATIrE
------------------------------------------------------------

 Several of the SATIrE-based analyses are accessable via the
 satire_driver program.

 Examples:

 a) <INSTALL_PREFIX>/bin/satire_driver \
      --run-pointsto-analysis <FILE1.c> <FILE2.c> ...  --output-text
 
 For the TERMITE-based loop bounds analysis a convenient executable is
 available under <INSTALL_PREFIX>/bin/loopbounds

 b) <INSTALL_PREFIX>/bin/loopbounds  <FILE1.c> | term2c


------------------------------------------------------------
(3) COMPILING THE EXAMPLE ANALYSES THAT COME WITH SATIrE
------------------------------------------------------------

 a) Ensure that SATIrE's <INSTALL_PREFIX>/bin is in your environment variable path.

 b) compile all examples that come with SATIrE
    cd SATIrE-0.8.6/examples
    sh build-examples.sh                  [creates examples in directory executable-examples]
                                          [note that the script uses the *installed* 'newanalysis']

    Example for viewing shape analysis results:
      cd executable-examples
      cd srw98_shape
      srw98_shape --output-gdl=srw98_shape_result.gdl --output-source=annot_srw98_listreverse.C 
                  --aliassourceoutput tests/srw98_listreverse.C
      aisee srw98_shape_result.gdl        [view shape graphs with aisee]
      cat annot_srw98_listreverse.C       [view source file annotated with computed alias pairs]

 c) If you want to perform each step on your own, here is an example for sl1rd:
    [let's assume that you unpacked SATIrE-0.8.6.tgz in your home directory]
    cp -r ~/SATIrE-0.8.6/examples/sl1rd . [copy all files and test files to your directory]
    cd sl1rd                              [change to the directory]
    newanalysis                           [generate and configure all required files]
    make                                  [compile the analyzer (links ROSE,PAG,SATIrE files)]
    sl1rd --help                          [prints an overview of the available options]
    sl1rd --output-gdl=sl1rd_result.gdl tests/rdtest1.C
                                          [run the analyzer on the test file 'rdtest1.C']
    aisee sl1rd_result.gdl                [view the analysis result with aisee]
    sl1rd --output-source=tests/annot_rdtest1.C tests/rdtest1.C  
                                          [generate an annotated source file tests/annot_rdtest1.C]
    sl1rd --output-term=tests/rdtest1.pl tests/rdtest1.C
                                          [generate a term representation in tests/rdtest1.C.pl]

 d) If you are starting with a shape analysis (srw98_shape or nnh99_shape) you must use
    newanalysis -u
    The option 'u' ensures that existing files are not overwritten by 'newanalysis' which
    is currently necessary for the shape analyses to allow for analysis results post-processing
    and non-default visualizations.

------------------------------------------------------------
(4) CRAFTING A NEW ANALYSIS
------------------------------------------------------------

 a) Ensure that <INSTALL_PREFIX>/bin is in your environment variable path.

 b) mkdir <ANALYSIS_NAME>

 c) cd <ANALYSIS_NAME>

 d) Implement <ANALYSIS_NAME>.set and <ANALYSIS_NAME>.optla

 e) Run 'newanalysis' to have all required files copied into your
    directory. (you can rerun newanalysis later again)

    If you do modify the generated files do not want them to be overwritten
    in subsequent uses of new analysis use option '-u' (for update). 
    The option '-u' *must* be used if you are apply newanalysis to the examples
    srw98_shape and nnh99_shape to not overwrite main.C and main.h which are
    predefined for the two shape analyses. (Future versions of SATIrE will
    include a configure file that allows to handle such cases in a more 
    convenient way)

 f) Run 'make' to compile your analyzer

 g) Run your analyzer '<ANALYSIS_NAME> <INPUTFILE>'. The input file is a
    C/C++ source file and the executable analyzer has the name <ANALYSIS_NAME>.
    This will generate a file '<ANALYSIS_NAME>_result.gdl' which can be
    viewed with the tool aiSee.

    Note, the command 'newanalysis' never modifies *.set and *.optla files
    but does overwrite Makefile, main.C, main-support.C in the directory 
    where it is run. 

------------------------------------------------------------
(5) FURTHER INFORMATION & CONTACT
------------------------------------------------------------
  
 a) Documentation that comes with the distribution can be found
    in the directory 'docs'.
    satire_overview.pdf: gives an overview of the SATIrE infrastructure
    satire_cfgconstruction.pdf: describes the structure of the ICFG
    satire_attributes_auxiliary_functions: a text document on the auxiliary
          functions that can be used in PAG analysis specifications to 
          access various program information.
    
 b) On the web information can be found at:
    http://www.complang.tuwien.ac.at/markus/satire
    http://www.complang.tuwien.ac.at/markus/satirefaq

 c) For questions, feedback, bug reports, or suggestions on SATIrE send
    email to: markus@complang.tuwien.ac.at
