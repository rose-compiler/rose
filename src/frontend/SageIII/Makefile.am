include $(top_srcdir)/config/Makefile.for.ROSE.includes.and.libs

## Place generated object files (.o) into the same directory as their source
## files, in order to avoid collisions when non-recursive make is used.
AUTOMAKE_OPTIONS = subdir-objects

include $(srcdir)/sage_support/Makefile_variables

#
# Don't use $(srcdir) in conjunction with [subdir-objects], otherwise
# object files will be built in the source tree. Therefore, we need to
# use relative paths.
#
#mptPartialRedundancyEliminationPath=$(srcdir)/partialRedundancyElimination#
fSageSupportPath=sage_support#

if ROSE_USE_INTERNAL_FRONTEND_DEVELOPMENT
   SUBDIRS = astFixup astPostProcessing sageInterface astVisualization virtualCFG includeDirectivesProcessing
else
   SUBDIRS = astFileIO astFixup astPostProcessing sageInterface virtualCFG astTokenStream astHiddenTypeAndDeclarationLists astVisualization astFromString includeDirectivesProcessing
endif

# DQ (5/2/2009): This supports the optimization of the new 
# Graph IR nodes (makes about 25% improvement, I think).
# ROSE_OPTIMIZATION_LEVEL = -O3
ROSE_OPTIMIZATION_LEVEL =
# ROSE_VERBOSE = -rose:verbose 2

# Liao, 3/31/2009, moved the OpenMP parser here
#Liao, 10/27/2008. I decide to parse OpenMP pragma string here
# Bison flags
AM_YFLAGS = -d
# Flex flags
AM_LFLAGS =
# avoid unused Flex functions which are automatically generated
#CXXFLAGS+= -DYY_NO_TOP_STATE -DYY_NO_POP_STATE $(ROSE_OPTIMIZATION_LEVEL)

CXXFLAGS += $(ROSE_OPTIMIZATION_LEVEL) $(ROSE_VERBOSE)

# DQ (11/14/2011): Add debug support when doing selective frontend development.
# This cause the link time to incread about 4X.
if ROSE_USE_INTERNAL_FRONTEND_DEVELOPMENT
# CXXFLAGS += -g
endif

# omplexer.cc needs a header generaetd from ompparser.yy
omplexer.lo: ompparser.h omplexer.cc
ompparser.h: ompparser.cc
	if test -f ompparser.hh; then $(LN_S) -f ompparser.hh ompparser.h; fi;

# Force sage.docs to be make by default 
# (if sage.docs.in is modified)
all-local: roseh sage.docs 


# AM_CPPFLAGS = $(ROSE_INCLUDES)
# AM_CPPFLAGS = $(ROSE_INCLUDES) -I$(top_srcdir)/src/frontend/EDG_SAGE_Connection -I$(top_srcdir)/src/frontend/EDG/EDG_3.3/src $(WAVE_INCLUDES)
# AM_CPPFLAGS = $(ROSE_INCLUDES) -I$(top_srcdir)/src/frontend/EDG_SAGE_Connection -I$(top_srcdir)/src/frontend/EDG/EDG_3.3/src
# JJW 6-2-2008: We shouldn't be using anything from EDG outside these two directories
# AM_CPPFLAGS = $(ROSE_INCLUDES) # -I$(top_srcdir)/src/frontend/EDG_SAGE_Connection -I$(top_srcdir)/src/frontend/EDG/EDG_3.3/src
AM_CPPFLAGS = $(ROSE_INCLUDES)

# DQ (3/13/2010): sage_support.C requires the OFP fortran source files to be made available.
# if ROSE_USE_OPEN_FORTRAN_PARSER
if ROSE_BUILD_FORTRAN_LANGUAGE_SUPPORT
   AM_CPPFLAGS += -I${top_builddir}/src/3rdPartyLibraries/fortran-parser
endif

###Rasmussen:FIXME************************************
   AM_CPPFLAGS += -I$(top_srcdir)/src/frontend/Experimental_General_Language_Support

## The grammar generator (ROSETTA) should use its own template repository
CXX_TEMPLATE_REPOSITORY_PATH = .

# Copy the original lex file and the C++ file generated from it to the distribution
# so that users don't have to find an appropriate version of lex (flex).  Flex should
# be used by developers so that ANSI C code is generated for g++.  This is something
# for developers to worry about in the generation of sufficently portable distributions.
# EXTRA_DIST = preproc.lex preproc.C sageClasses.docs sage.docs.in docs
# EXTRA_DIST = preproc.lex preproc.C astGraphTemplate.C docs
# EXTRA_DIST = preproc.ll docs rtiHelpers.h attributeListMap.h

# DQ (9/29/2009): Renamed preproc.ll to preproc-c.ll in SVN.
# This will hopefull avoid a linking problem where multiple files
# are called preproc.o (from here and from EDG).
# Rasmussen (04/17/2019): Support for ATerms has been deprecated (atermSupport.h removed)
EXTRA_DIST = CMakeLists.txt docs rtiHelpers.h attributeListMap.h \
             advanced_preprocessing_hooks.h rose_attributes_list.h \
             sage3basic.hhh fileoffsetbits.h rosedll.h \
	     PolicyControl.txt Utf8.h
if ROSE_BUILD_CPP_LANGUAGE_SUPPORT
EXTRA_DIST += preproc-c.ll omplexer.cc ompparser.cc ompparser.h ompAstConstruction.h
endif

CLEANFILES = haveRosettaGeneratedSource

DISTCLEANFILES = preproc-c.cc ompparser.cc ompparser.h omplexer.cc

# Some source code is generated (call make in ROSE/src/ROSETTA/src to generate these files)
if ROSE_USE_INTERNAL_FRONTEND_DEVELOPMENT
GENERATED_SOURCE =						\
	Cxx_Grammar.h						\
	Cxx_GrammarDeclarations.h				\
	Cxx_GrammarDowncast.h					\
	Cxx_GrammarStorageClasses.h				\
	Cxx_GrammarSgNodeDefinitions.h				\
	Cxx_GrammarSgAsmNodeDefinitions.h			\
	Cxx_GrammarSgAsmCilNodeDefinitions.h			\
	Cxx_GrammarSgAsmDwarfNodeDefinitions.h			\
	Cxx_GrammarSgAsmJvmNodeDefinitions.h			\
	Cxx_GrammarVariants.h					\
	Cxx_GrammarVisitorSupport.h				\
	Cxx_GrammarVisitorSupport.C				\
	Cxx_Grammar.C						\
	Cxx_GrammarMemoryPoolSupport.C				\
	AstQueryMemoryPool.h					\
	Cxx_GrammarReturnClassHierarchySubTree.C		\
	Cxx_GrammarTreeTraversalSuccessorContainer.C		\
	Cxx_GrammarTreeTraversalAccessEnums.h			\
	Cxx_GrammarVariantEnumNames.C				\
	Cxx_GrammarSerialization.C				\
	Cxx_GrammarSerialization.h				\
	Cxx_GrammarNewAndDeleteOperators.C			\
	Cxx_GrammarCopyMemberFunctions.C			\
	Cxx_GrammarNodeIdSupport.C				\
	Cxx_GrammarTraverseMemoryPool.C				\
	Cxx_GrammarCheckingIfDataMembersAreInMemoryPool.C	\
	Cxx_GrammarMemoryPoolSupport.h				\
	Cxx_GrammarReturnDataMemberPointers.C			\
	Cxx_GrammarProcessDataMemberReferenceToPointers.C	\
	Cxx_GrammarNewConstructors.C				\
	Cxx_GrammarGetChildIndex.C				\
        SgNode.h						\
        SgAsmAarch32Coprocessor.h				\
        SgAsmAarch32Instruction.h				\
        SgAsmAarch64AtOperand.h					\
        SgAsmAarch64BarrierOperand.h				\
        SgAsmAarch64CImmediateOperand.h				\
        SgAsmAarch64Instruction.h				\
        SgAsmAarch64PrefetchOperand.h				\
        SgAsmAarch64PState.h					\
        SgAsmAarch64SysMoveOperand.h				\
        SgAsmBasicString.h					\
        SgAsmBinaryAdd.h					\
        SgAsmBinaryAsr.h					\
        SgAsmBinaryConcat.h					\
        SgAsmBinaryDivide.h					\
        SgAsmBinaryExpression.h					\
        SgAsmBinaryLsl.h					\
        SgAsmBinaryLsr.h					\
        SgAsmBinaryMod.h					\
        SgAsmBinaryMsl.h					\
        SgAsmBinaryMultiply.h					\
        SgAsmBinaryPostupdate.h					\
        SgAsmBinaryPreupdate.h					\
        SgAsmBinaryRor.h					\
        SgAsmBinarySubtract.h					\
        SgAsmBlock.h						\
        SgAsmByteOrder.h					\
        SgAsmCilAssembly.h					\
        SgAsmCilAssemblyOS.h					\
        SgAsmCilAssemblyOSTable.h				\
        SgAsmCilAssemblyProcessor.h				\
        SgAsmCilAssemblyProcessorTable.h			\
        SgAsmCilAssemblyRef.h					\
        SgAsmCilAssemblyRefOS.h					\
        SgAsmCilAssemblyRefOSTable.h				\
        SgAsmCilAssemblyRefProcessor.h				\
        SgAsmCilAssemblyRefProcessorTable.h			\
        SgAsmCilAssemblyRefTable.h				\
        SgAsmCilAssemblyTable.h					\
        SgAsmCilClassLayout.h					\
        SgAsmCilClassLayoutTable.h				\
        SgAsmCilConstant.h					\
        SgAsmCilConstantTable.h					\
        SgAsmCilCustomAttribute.h				\
        SgAsmCilCustomAttributeTable.h				\
        SgAsmCilDataStream.h					\
        SgAsmCilDeclSecurity.h					\
        SgAsmCilDeclSecurityTable.h				\
        SgAsmCilErrorHeap.h						\
        SgAsmCilEvent.h						\
        SgAsmCilEventMap.h					\
        SgAsmCilEventMapTable.h					\
        SgAsmCilEventTable.h					\
        SgAsmCilExceptionData.h					\
        SgAsmCilExportedType.h					\
        SgAsmCilExportedTypeTable.h				\
        SgAsmCilField.h						\
        SgAsmCilFieldLayout.h					\
        SgAsmCilFieldLayoutTable.h				\
        SgAsmCilFieldMarshal.h					\
        SgAsmCilFieldMarshalTable.h				\
        SgAsmCilFieldRVA.h					\
        SgAsmCilFieldRVATable.h					\
        SgAsmCilFieldTable.h					\
        SgAsmCilFile.h						\
        SgAsmCilFileTable.h					\
        SgAsmCilGenericParamConstraint.h			\
        SgAsmCilGenericParamConstraintTable.h			\
        SgAsmCilGenericParam.h					\
        SgAsmCilGenericParamTable.h				\
        SgAsmCilImplMap.h					\
        SgAsmCilImplMapTable.h					\
        SgAsmCilInstruction.h					\
        SgAsmCilInterfaceImpl.h					\
        SgAsmCilInterfaceImplTable.h				\
        SgAsmCilManifestResource.h				\
        SgAsmCilManifestResourceTable.h				\
        SgAsmCilMemberRef.h					\
        SgAsmCilMemberRefTable.h				\
        SgAsmCilMetadata.h					\
        SgAsmCilMetadataHeap.h					\
        SgAsmCilMetadataRoot.h					\
        SgAsmCilMethodData.h					\
        SgAsmCilMethodDef.h					\
        SgAsmCilMethodDefTable.h				\
        SgAsmCilMethodImpl.h					\
        SgAsmCilMethodImplTable.h				\
        SgAsmCilMethodSemantics.h				\
        SgAsmCilMethodSemanticsTable.h				\
        SgAsmCilMethodSpec.h					\
        SgAsmCilMethodSpecTable.h				\
        SgAsmCilModule.h					\
        SgAsmCilModuleRef.h					\
        SgAsmCilModuleRefTable.h				\
        SgAsmCilModuleTable.h					\
        SgAsmCilNestedClass.h					\
        SgAsmCilNestedClassTable.h				\
        SgAsmCilNode.h						\
        SgAsmCilParam.h						\
        SgAsmCilParamTable.h					\
        SgAsmCilProperty.h					\
        SgAsmCilPropertyMap.h					\
        SgAsmCilPropertyMapTable.h				\
        SgAsmCilPropertyTable.h					\
        SgAsmCilStandAloneSig.h					\
        SgAsmCilStandAloneSigTable.h				\
        SgAsmCilTypeDef.h					\
        SgAsmCilTypeDefTable.h					\
        SgAsmCilTypeRef.h					\
        SgAsmCilTypeRefTable.h					\
        SgAsmCilTypeSpec.h					\
        SgAsmCilTypeSpecTable.h					\
        SgAsmCilUint32Heap.h					\
        SgAsmCilUint8Heap.h					\
        SgAsmCliHeader.h					\
        SgAsmCoffStrtab.h					\
        SgAsmCoffSymbol.h					\
        SgAsmCoffSymbolList.h					\
        SgAsmCoffSymbolTable.h					\
        SgAsmCommonSubExpression.h				\
        SgAsmConstantExpression.h				\
        SgAsmControlFlagsExpression.h				\
        SgAsmDirectRegisterExpression.h				\
        SgAsmDOSExtendedHeader.h				\
        SgAsmDOSFileHeader.h					\
        SgAsmDwarfAccessDeclaration.h				\
        SgAsmDwarfArrayType.h					\
        SgAsmDwarfBaseType.h					\
        SgAsmDwarfCatchBlock.h					\
        SgAsmDwarfClassTemplate.h				\
        SgAsmDwarfClassType.h					\
        SgAsmDwarfCommonBlock.h					\
        SgAsmDwarfCommonInclusion.h				\
        SgAsmDwarfCompilationUnit.h				\
        SgAsmDwarfCompilationUnitList.h				\
        SgAsmDwarfCondition.h					\
        SgAsmDwarfConstant.h					\
        SgAsmDwarfConstruct.h					\
        SgAsmDwarfConstructList.h				\
        SgAsmDwarfConstType.h					\
        SgAsmDwarfDwarfProcedure.h				\
        SgAsmDwarfEntryPoint.h					\
        SgAsmDwarfEnumerationType.h				\
        SgAsmDwarfEnumerator.h					\
        SgAsmDwarfFileType.h					\
        SgAsmDwarfFormalParameter.h				\
        SgAsmDwarfFormatLabel.h					\
        SgAsmDwarfFriend.h					\
        SgAsmDwarfFunctionTemplate.h				\
        SgAsmDwarfImportedDeclaration.h				\
        SgAsmDwarfImportedModule.h				\
        SgAsmDwarfImportedUnit.h				\
        SgAsmDwarfInformation.h					\
        SgAsmDwarfInheritance.h					\
        SgAsmDwarfInlinedSubroutine.h				\
        SgAsmDwarfInterfaceType.h				\
        SgAsmDwarfLabel.h					\
        SgAsmDwarfLexicalBlock.h				\
        SgAsmDwarfLine.h					\
        SgAsmDwarfLineList.h					\
        SgAsmDwarfMacro.h					\
        SgAsmDwarfMacroList.h					\
        SgAsmDwarfMember.h					\
        SgAsmDwarfModule.h					\
        SgAsmDwarfMutableType.h					\
        SgAsmDwarfNamelist.h					\
        SgAsmDwarfNamelistItem.h				\
        SgAsmDwarfNamespace.h					\
        SgAsmDwarfPackedType.h					\
        SgAsmDwarfPartialUnit.h					\
        SgAsmDwarfPointerType.h					\
        SgAsmDwarfPtrToMemberType.h				\
        SgAsmDwarfReferenceType.h				\
        SgAsmDwarfRestrictType.h				\
        SgAsmDwarfSetType.h					\
        SgAsmDwarfSharedType.h					\
        SgAsmDwarfStringType.h					\
        SgAsmDwarfStructureType.h				\
        SgAsmDwarfSubprogram.h					\
        SgAsmDwarfSubrangeType.h				\
        SgAsmDwarfSubroutineType.h				\
        SgAsmDwarfTemplateTypeParameter.h			\
        SgAsmDwarfTemplateValueParameter.h			\
        SgAsmDwarfThrownType.h					\
        SgAsmDwarfTryBlock.h					\
        SgAsmDwarfTypedef.h					\
        SgAsmDwarfUnionType.h					\
        SgAsmDwarfUnknownConstruct.h				\
        SgAsmDwarfUnspecifiedParameters.h			\
        SgAsmDwarfUnspecifiedType.h				\
        SgAsmDwarfUpcRelaxedType.h				\
        SgAsmDwarfUpcSharedType.h				\
        SgAsmDwarfUpcStrictType.h				\
        SgAsmDwarfVariable.h					\
        SgAsmDwarfVariant.h					\
        SgAsmDwarfVariantPart.h					\
        SgAsmDwarfVolatileType.h				\
        SgAsmDwarfWithStmt.h					\
        SgAsmElfDynamicEntry.h					\
        SgAsmElfDynamicEntryList.h				\
        SgAsmElfDynamicSection.h				\
        SgAsmElfEHFrameEntryCI.h				\
        SgAsmElfEHFrameEntryCIList.h				\
        SgAsmElfEHFrameEntryFD.h				\
        SgAsmElfEHFrameEntryFDList.h				\
        SgAsmElfEHFrameSection.h				\
        SgAsmElfFileHeader.h					\
        SgAsmElfNoteEntry.h					\
        SgAsmElfNoteEntryList.h					\
        SgAsmElfNoteSection.h					\
        SgAsmElfRelocEntry.h					\
        SgAsmElfRelocEntryList.h				\
        SgAsmElfRelocSection.h					\
        SgAsmElfSection.h					\
        SgAsmElfSectionTableEntry.h				\
        SgAsmElfSectionTable.h					\
        SgAsmElfSegmentTableEntry.h				\
        SgAsmElfSegmentTableEntryList.h				\
        SgAsmElfSegmentTable.h					\
        SgAsmElfStringSection.h					\
        SgAsmElfStrtab.h					\
        SgAsmElfSymbol.h					\
        SgAsmElfSymbolList.h					\
        SgAsmElfSymbolSection.h					\
        SgAsmElfSymverDefinedAux.h				\
        SgAsmElfSymverDefinedAuxList.h				\
        SgAsmElfSymverDefinedEntry.h				\
        SgAsmElfSymverDefinedEntryList.h			\
        SgAsmElfSymverDefinedSection.h				\
        SgAsmElfSymverEntry.h					\
        SgAsmElfSymverEntryList.h				\
        SgAsmElfSymverNeededAux.h				\
        SgAsmElfSymverNeededAuxList.h				\
        SgAsmElfSymverNeededEntry.h				\
        SgAsmElfSymverNeededEntryList.h				\
        SgAsmElfSymverNeededSection.h				\
        SgAsmElfSymverSection.h					\
        SgAsmExecutableFileFormat.h				\
        SgAsmExpression.h					\
        SgAsmExprListExp.h					\
        SgAsmFloatType.h					\
        SgAsmFloatValueExpression.h				\
        SgAsmFunction.h						\
        SgAsmGenericDLL.h					\
        SgAsmGenericDLLList.h					\
        SgAsmGenericFile.h					\
        SgAsmGenericFileList.h					\
        SgAsmGenericFormat.h					\
        SgAsmGenericHeader.h					\
        SgAsmGenericHeaderList.h				\
        SgAsmGenericSection.h					\
        SgAsmGenericSectionList.h				\
        SgAsmGenericString.h					\
        SgAsmGenericStrtab.h					\
        SgAsmGenericSymbol.h					\
        SgAsmGenericSymbolList.h				\
        SgAsmIndirectRegisterExpression.h			\
        SgAsmInstruction.h					\
        SgAsmInstructionList.h					\
        SgAsmIntegerType.h					\
        SgAsmIntegerValueExpression.h				\
        SgAsmInterpretation.h					\
        SgAsmInterpretationList.h				\
        SgAsmJvmAnnotationDefault.h				\
        SgAsmJvmAttribute.h					\
        SgAsmJvmAttributeTable.h				\
        SgAsmJvmBootstrapMethod.h				\
        SgAsmJvmBootstrapMethods.h				\
        SgAsmJvmClass.h						\
        SgAsmJvmCodeAttribute.h					\
        SgAsmJvmConstantPoolEntry.h				\
        SgAsmJvmConstantPool.h					\
        SgAsmJvmConstantValue.h					\
        SgAsmJvmDeprecated.h					\
        SgAsmJvmEnclosingMethod.h				\
        SgAsmJvmExceptionHandler.h				\
        SgAsmJvmExceptions.h					\
        SgAsmJvmExceptionTable.h				\
        SgAsmJvmField.h						\
        SgAsmJvmFieldTable.h					\
        SgAsmJvmFileHeader.h					\
        SgAsmJvmInnerClassesEntry.h				\
        SgAsmJvmInnerClasses.h					\
        SgAsmJvmInstruction.h					\
        SgAsmJvmLineNumberEntry.h				\
        SgAsmJvmLineNumberTable.h				\
        SgAsmJvmLocalVariableEntry.h				\
        SgAsmJvmLocalVariableTable.h				\
        SgAsmJvmLocalVariableTypeEntry.h			\
        SgAsmJvmLocalVariableTypeTable.h			\
        SgAsmJvmMethod.h					\
        SgAsmJvmMethodParametersEntry.h				\
        SgAsmJvmMethodParameters.h				\
        SgAsmJvmMethodTable.h					\
        SgAsmJvmModuleMainClass.h				\
        SgAsmJvmNestHost.h					\
        SgAsmJvmNestMembers.h					\
        SgAsmJvmNode.h						\
        SgAsmJvmRuntimeAnnotation.h				\
        SgAsmJvmRuntimeAnnotationPair.h 			\
        SgAsmJvmRuntimeAnnotationValue.h			\
        SgAsmJvmRuntimeParameterAnnotation.h			\
        SgAsmJvmRuntimeVisibleAnnotations.h			\
        SgAsmJvmRuntimeVisibilityParamAnnotations.h		\
        SgAsmJvmRuntimeInvisibleAnnotations.h			\
        SgAsmJvmSignature.h					\
        SgAsmJvmSourceFile.h					\
        SgAsmJvmStackMapFrame.h					\
        SgAsmJvmStackMapTable.h					\
        SgAsmJvmStackMapVerificationType.h			\
        SgAsmJvmSynthetic.h					\
        SgAsmLEEntryPoint.h					\
        SgAsmLEEntryTable.h					\
        SgAsmLEFileHeader.h					\
        SgAsmLENameTable.h					\
        SgAsmLEPageTableEntry.h					\
        SgAsmLEPageTable.h					\
        SgAsmLERelocTable.h					\
        SgAsmLESection.h					\
        SgAsmLESectionTableEntry.h				\
        SgAsmLESectionTable.h					\
        SgAsmM68kInstruction.h					\
        SgAsmMemoryReferenceExpression.h			\
        SgAsmMipsInstruction.h					\
        SgAsmNEEntryPoint.h					\
        SgAsmNEEntryTable.h					\
        SgAsmNEFileHeader.h					\
        SgAsmNEModuleTable.h					\
        SgAsmNENameTable.h					\
        SgAsmNERelocEntry.h					\
        SgAsmNERelocTable.h					\
        SgAsmNESection.h					\
        SgAsmNESectionTableEntry.h				\
        SgAsmNESectionTable.h					\
        SgAsmNEStringTable.h					\
        SgAsmNode.h						\
        SgAsmNullInstruction.h					\
        SgAsmOperandList.h					\
        SgAsmPEExportDirectory.h				\
        SgAsmPEExportEntry.h					\
        SgAsmPEExportEntryList.h				\
        SgAsmPEExportSection.h					\
        SgAsmPEFileHeader.h					\
        SgAsmPEImportDirectory.h				\
        SgAsmPEImportDirectoryList.h				\
        SgAsmPEImportItem.h					\
        SgAsmPEImportItemList.h					\
        SgAsmPEImportSection.h					\
        SgAsmPERVASizePair.h					\
        SgAsmPERVASizePairList.h				\
        SgAsmPESection.h					\
        SgAsmPESectionTableEntry.h				\
        SgAsmPESectionTable.h					\
        SgAsmPEStringSection.h					\
	SgAsmPointerType.h					\
        SgAsmPowerpcInstruction.h				\
        SgAsmRegisterNames.h					\
        SgAsmRegisterReferenceExpression.h			\
        SgAsmRiscOperation.h					\
        SgAsmScalarType.h					\
        SgAsmStackExpression.h					\
        SgAsmStatement.h					\
        SgAsmStaticData.h					\
        SgAsmStoredString.h					\
        SgAsmStringStorage.h					\
        SgAsmSynthesizedDataStructureDeclaration.h		\
        SgAsmSynthesizedDeclaration.h				\
        SgAsmSynthesizedFieldDeclaration.h			\
        SgAsmType.h						\
        SgAsmUnaryExpression.h					\
        SgAsmUnaryMinus.h					\
        SgAsmUnaryPlus.h					\
        SgAsmUnaryRrx.h						\
        SgAsmUnarySignedExtend.h				\
        SgAsmUnaryTruncate.h					\
        SgAsmUnaryUnsignedExtend.h				\
        SgAsmUserInstruction.h					\
        SgAsmValueExpression.h					\
        SgAsmVectorType.h					\
	SgAsmVoidType.h						\
        SgAsmX86Instruction.h
else
GENERATED_SOURCE =						\
	Cxx_Grammar.h						\
	Cxx_GrammarDeclarations.h				\
	Cxx_GrammarDowncast.h					\
	Cxx_GrammarStorageClasses.h				\
	Cxx_GrammarSgNodeDefinitions.h				\
	Cxx_GrammarSgAsmNodeDefinitions.h			\
	Cxx_GrammarSgAsmCilNodeDefinitions.h			\
	Cxx_GrammarSgAsmDwarfNodeDefinitions.h			\
	Cxx_GrammarSgAsmJvmNodeDefinitions.h			\
	Cxx_GrammarVariants.h					\
	Cxx_GrammarVisitorSupport.h				\
	Cxx_GrammarVisitorSupport.C				\
	Cxx_Grammar.C						\
	Cxx_GrammarRTI.C					\
	Cxx_GrammarMemoryPoolSupport.C				\
	AstQueryMemoryPool.h					\
	Cxx_GrammarReturnClassHierarchySubTree.C		\
	Cxx_GrammarTreeTraversalSuccessorContainer.C		\
	Cxx_GrammarTreeTraversalAccessEnums.h			\
	Cxx_GrammarVariantEnumNames.C				\
	Cxx_GrammarSerialization.C				\
	Cxx_GrammarSerialization.h				\
	Cxx_GrammarNewAndDeleteOperators.C			\
	Cxx_GrammarCopyMemberFunctions.C			\
	Cxx_GrammarNodeIdSupport.C				\
	Cxx_GrammarTraverseMemoryPool.C				\
	Cxx_GrammarCheckingIfDataMembersAreInMemoryPool.C	\
	Cxx_GrammarMemoryPoolSupport.h				\
	AST_FILE_IO.h						\
	AST_FILE_IO.C						\
	StorageClasses.h					\
	StorageClasses.C					\
	Cxx_GrammarReturnDataMemberPointers.C			\
	Cxx_GrammarProcessDataMemberReferenceToPointers.C	\
	Cxx_GrammarNewConstructors.C				\
	Cxx_GrammarGetChildIndex.C				\
	SgNode.h						\
	SgAsmAarch32Coprocessor.h				\
	SgAsmAarch32Instruction.h				\
	SgAsmAarch64AtOperand.h					\
	SgAsmAarch64BarrierOperand.h				\
	SgAsmAarch64CImmediateOperand.h				\
	SgAsmAarch64Instruction.h				\
	SgAsmAarch64PrefetchOperand.h				\
	SgAsmAarch64PState.h					\
	SgAsmAarch64SysMoveOperand.h				\
	SgAsmBasicString.h					\
	SgAsmBinaryAdd.h					\
	SgAsmBinaryAsr.h					\
	SgAsmBinaryConcat.h					\
	SgAsmBinaryDivide.h					\
	SgAsmBinaryExpression.h					\
	SgAsmBinaryLsl.h					\
	SgAsmBinaryLsr.h					\
	SgAsmBinaryMod.h					\
	SgAsmBinaryMsl.h					\
	SgAsmBinaryMultiply.h					\
	SgAsmBinaryPostupdate.h					\
	SgAsmBinaryPreupdate.h					\
	SgAsmBinaryRor.h					\
	SgAsmBinarySubtract.h					\
	SgAsmBlock.h						\
	SgAsmByteOrder.h					\
	SgAsmCilAssembly.h					\
	SgAsmCilAssemblyOS.h					\
	SgAsmCilAssemblyOSTable.h				\
	SgAsmCilAssemblyProcessor.h				\
	SgAsmCilAssemblyProcessorTable.h			\
	SgAsmCilAssemblyRef.h					\
	SgAsmCilAssemblyRefOS.h					\
	SgAsmCilAssemblyRefOSTable.h				\
	SgAsmCilAssemblyRefProcessor.h				\
	SgAsmCilAssemblyRefProcessorTable.h			\
	SgAsmCilAssemblyRefTable.h				\
	SgAsmCilAssemblyTable.h					\
	SgAsmCilClassLayout.h					\
	SgAsmCilClassLayoutTable.h				\
	SgAsmCilConstant.h					\
	SgAsmCilConstantTable.h					\
	SgAsmCilCustomAttribute.h				\
	SgAsmCilCustomAttributeTable.h				\
	SgAsmCilDataStream.h					\
	SgAsmCilDeclSecurity.h					\
	SgAsmCilDeclSecurityTable.h				\
	SgAsmCilErrorHeap.h						\
	SgAsmCilEvent.h						\
	SgAsmCilEventMap.h					\
	SgAsmCilEventMapTable.h					\
	SgAsmCilEventTable.h					\
	SgAsmCilExceptionData.h					\
	SgAsmCilExportedType.h					\
	SgAsmCilExportedTypeTable.h				\
	SgAsmCilField.h						\
	SgAsmCilFieldLayout.h					\
	SgAsmCilFieldLayoutTable.h				\
	SgAsmCilFieldMarshal.h					\
	SgAsmCilFieldMarshalTable.h				\
	SgAsmCilFieldRVA.h					\
	SgAsmCilFieldRVATable.h					\
	SgAsmCilFieldTable.h					\
	SgAsmCilFile.h						\
	SgAsmCilFileTable.h					\
	SgAsmCilGenericParamConstraint.h			\
	SgAsmCilGenericParamConstraintTable.h			\
	SgAsmCilGenericParam.h					\
	SgAsmCilGenericParamTable.h				\
	SgAsmCilImplMap.h					\
	SgAsmCilImplMapTable.h					\
	SgAsmCilInstruction.h					\
	SgAsmCilInterfaceImpl.h					\
	SgAsmCilInterfaceImplTable.h				\
	SgAsmCilManifestResource.h				\
	SgAsmCilManifestResourceTable.h				\
	SgAsmCilMemberRef.h					\
	SgAsmCilMemberRefTable.h				\
	SgAsmCilMetadata.h					\
	SgAsmCilMetadataHeap.h					\
	SgAsmCilMetadataRoot.h					\
	SgAsmCilMethodData.h					\
	SgAsmCilMethodDef.h					\
	SgAsmCilMethodDefTable.h				\
	SgAsmCilMethodImpl.h					\
	SgAsmCilMethodImplTable.h				\
	SgAsmCilMethodSemantics.h				\
	SgAsmCilMethodSemanticsTable.h				\
	SgAsmCilMethodSpec.h					\
	SgAsmCilMethodSpecTable.h				\
	SgAsmCilModule.h					\
	SgAsmCilModuleRef.h					\
	SgAsmCilModuleRefTable.h				\
	SgAsmCilModuleTable.h					\
	SgAsmCilNestedClass.h					\
	SgAsmCilNestedClassTable.h				\
	SgAsmCilNode.h						\
	SgAsmCilParam.h						\
	SgAsmCilParamTable.h					\
	SgAsmCilProperty.h					\
	SgAsmCilPropertyMap.h					\
	SgAsmCilPropertyMapTable.h				\
	SgAsmCilPropertyTable.h					\
	SgAsmCilStandAloneSig.h					\
	SgAsmCilStandAloneSigTable.h				\
	SgAsmCilTypeDef.h					\
	SgAsmCilTypeDefTable.h					\
	SgAsmCilTypeRef.h					\
	SgAsmCilTypeRefTable.h					\
	SgAsmCilTypeSpec.h					\
	SgAsmCilTypeSpecTable.h					\
	SgAsmCilUint32Heap.h					\
	SgAsmCilUint8Heap.h					\
	SgAsmCliHeader.h					\
	SgAsmCoffStrtab.h					\
	SgAsmCoffSymbol.h					\
	SgAsmCoffSymbolList.h					\
	SgAsmCoffSymbolTable.h					\
	SgAsmCommonSubExpression.h				\
	SgAsmConstantExpression.h				\
	SgAsmControlFlagsExpression.h				\
	SgAsmDirectRegisterExpression.h				\
	SgAsmDOSExtendedHeader.h				\
	SgAsmDOSFileHeader.h					\
	SgAsmDwarfAccessDeclaration.h				\
	SgAsmDwarfArrayType.h					\
	SgAsmDwarfBaseType.h					\
	SgAsmDwarfCatchBlock.h					\
	SgAsmDwarfClassTemplate.h				\
	SgAsmDwarfClassType.h					\
	SgAsmDwarfCommonBlock.h					\
	SgAsmDwarfCommonInclusion.h				\
	SgAsmDwarfCompilationUnit.h				\
	SgAsmDwarfCompilationUnitList.h				\
	SgAsmDwarfCondition.h					\
	SgAsmDwarfConstant.h					\
	SgAsmDwarfConstruct.h					\
	SgAsmDwarfConstructList.h				\
	SgAsmDwarfConstType.h					\
	SgAsmDwarfDwarfProcedure.h				\
	SgAsmDwarfEntryPoint.h					\
	SgAsmDwarfEnumerationType.h				\
	SgAsmDwarfEnumerator.h					\
	SgAsmDwarfFileType.h					\
	SgAsmDwarfFormalParameter.h				\
	SgAsmDwarfFormatLabel.h					\
	SgAsmDwarfFriend.h					\
	SgAsmDwarfFunctionTemplate.h				\
	SgAsmDwarfImportedDeclaration.h				\
	SgAsmDwarfImportedModule.h				\
	SgAsmDwarfImportedUnit.h				\
	SgAsmDwarfInformation.h					\
	SgAsmDwarfInheritance.h					\
	SgAsmDwarfInlinedSubroutine.h				\
	SgAsmDwarfInterfaceType.h				\
	SgAsmDwarfLabel.h					\
	SgAsmDwarfLexicalBlock.h				\
	SgAsmDwarfLine.h					\
	SgAsmDwarfLineList.h					\
	SgAsmDwarfMacro.h					\
	SgAsmDwarfMacroList.h					\
	SgAsmDwarfMember.h					\
	SgAsmDwarfModule.h					\
	SgAsmDwarfMutableType.h					\
	SgAsmDwarfNamelist.h					\
	SgAsmDwarfNamelistItem.h				\
	SgAsmDwarfNamespace.h					\
	SgAsmDwarfPackedType.h					\
	SgAsmDwarfPartialUnit.h					\
	SgAsmDwarfPointerType.h					\
	SgAsmDwarfPtrToMemberType.h				\
	SgAsmDwarfReferenceType.h				\
	SgAsmDwarfRestrictType.h				\
	SgAsmDwarfSetType.h					\
	SgAsmDwarfSharedType.h					\
	SgAsmDwarfStringType.h					\
	SgAsmDwarfStructureType.h				\
	SgAsmDwarfSubprogram.h					\
	SgAsmDwarfSubrangeType.h				\
	SgAsmDwarfSubroutineType.h				\
	SgAsmDwarfTemplateTypeParameter.h			\
	SgAsmDwarfTemplateValueParameter.h			\
	SgAsmDwarfThrownType.h					\
	SgAsmDwarfTryBlock.h					\
	SgAsmDwarfTypedef.h					\
	SgAsmDwarfUnionType.h					\
	SgAsmDwarfUnknownConstruct.h				\
	SgAsmDwarfUnspecifiedParameters.h			\
	SgAsmDwarfUnspecifiedType.h				\
	SgAsmDwarfUpcRelaxedType.h				\
	SgAsmDwarfUpcSharedType.h				\
	SgAsmDwarfUpcStrictType.h				\
	SgAsmDwarfVariable.h					\
	SgAsmDwarfVariant.h					\
	SgAsmDwarfVariantPart.h					\
	SgAsmDwarfVolatileType.h				\
	SgAsmDwarfWithStmt.h					\
	SgAsmElfDynamicEntry.h					\
	SgAsmElfDynamicEntryList.h				\
	SgAsmElfDynamicSection.h				\
	SgAsmElfEHFrameEntryCI.h				\
	SgAsmElfEHFrameEntryCIList.h				\
	SgAsmElfEHFrameEntryFD.h				\
	SgAsmElfEHFrameEntryFDList.h				\
	SgAsmElfEHFrameSection.h				\
	SgAsmElfFileHeader.h					\
	SgAsmElfNoteEntry.h					\
	SgAsmElfNoteEntryList.h					\
	SgAsmElfNoteSection.h					\
	SgAsmElfRelocEntry.h					\
	SgAsmElfRelocEntryList.h				\
	SgAsmElfRelocSection.h					\
	SgAsmElfSection.h					\
	SgAsmElfSectionTableEntry.h				\
	SgAsmElfSectionTable.h					\
	SgAsmElfSegmentTableEntry.h				\
	SgAsmElfSegmentTableEntryList.h				\
	SgAsmElfSegmentTable.h					\
	SgAsmElfStringSection.h					\
	SgAsmElfStrtab.h					\
	SgAsmElfSymbol.h					\
	SgAsmElfSymbolList.h					\
	SgAsmElfSymbolSection.h					\
	SgAsmElfSymverDefinedAux.h				\
	SgAsmElfSymverDefinedAuxList.h				\
	SgAsmElfSymverDefinedEntry.h				\
	SgAsmElfSymverDefinedEntryList.h			\
	SgAsmElfSymverDefinedSection.h				\
	SgAsmElfSymverEntry.h					\
	SgAsmElfSymverEntryList.h				\
	SgAsmElfSymverNeededAux.h				\
	SgAsmElfSymverNeededAuxList.h				\
	SgAsmElfSymverNeededEntry.h				\
	SgAsmElfSymverNeededEntryList.h				\
	SgAsmElfSymverNeededSection.h				\
	SgAsmElfSymverSection.h					\
	SgAsmExecutableFileFormat.h				\
	SgAsmExpression.h					\
	SgAsmExprListExp.h					\
	SgAsmFloatType.h					\
	SgAsmFloatValueExpression.h				\
	SgAsmFunction.h						\
	SgAsmGenericDLL.h					\
	SgAsmGenericDLLList.h					\
	SgAsmGenericFile.h					\
	SgAsmGenericFileList.h					\
	SgAsmGenericFormat.h					\
	SgAsmGenericHeader.h					\
	SgAsmGenericHeaderList.h				\
	SgAsmGenericSection.h					\
	SgAsmGenericSectionList.h				\
	SgAsmGenericString.h					\
	SgAsmGenericStrtab.h					\
	SgAsmGenericSymbol.h					\
	SgAsmGenericSymbolList.h				\
	SgAsmIndirectRegisterExpression.h			\
	SgAsmInstruction.h					\
	SgAsmInstructionList.h					\
	SgAsmIntegerType.h					\
	SgAsmIntegerValueExpression.h				\
	SgAsmInterpretation.h					\
	SgAsmInterpretationList.h				\
	SgAsmJvmAnnotationDefault.h				\
	SgAsmJvmAttribute.h					\
	SgAsmJvmAttributeTable.h				\
	SgAsmJvmBootstrapMethod.h				\
	SgAsmJvmBootstrapMethods.h				\
	SgAsmJvmClass.h						\
	SgAsmJvmCodeAttribute.h					\
	SgAsmJvmConstantPoolEntry.h				\
	SgAsmJvmConstantPool.h					\
	SgAsmJvmConstantValue.h					\
	SgAsmJvmDeprecated.h					\
	SgAsmJvmEnclosingMethod.h				\
	SgAsmJvmExceptionHandler.h				\
	SgAsmJvmExceptions.h					\
	SgAsmJvmExceptionTable.h				\
	SgAsmJvmField.h						\
	SgAsmJvmFieldTable.h					\
	SgAsmJvmFileHeader.h					\
	SgAsmJvmInnerClassesEntry.h				\
	SgAsmJvmInnerClasses.h					\
	SgAsmJvmInstruction.h					\
	SgAsmJvmLineNumberEntry.h				\
	SgAsmJvmLineNumberTable.h				\
	SgAsmJvmLocalVariableEntry.h				\
	SgAsmJvmLocalVariableTable.h				\
	SgAsmJvmLocalVariableTypeEntry.h			\
	SgAsmJvmLocalVariableTypeTable.h			\
	SgAsmJvmMethod.h					\
	SgAsmJvmMethodParametersEntry.h				\
	SgAsmJvmMethodParameters.h				\
	SgAsmJvmMethodTable.h					\
	SgAsmJvmModuleMainClass.h				\
	SgAsmJvmNestHost.h					\
	SgAsmJvmNestMembers.h					\
	SgAsmJvmNode.h						\
        SgAsmJvmRuntimeAnnotation.h				\
        SgAsmJvmRuntimeAnnotationPair.h 			\
        SgAsmJvmRuntimeAnnotationValue.h			\
        SgAsmJvmRuntimeParameterAnnotation.h			\
        SgAsmJvmRuntimeVisibleAnnotations.h			\
        SgAsmJvmRuntimeVisibilityParamAnnotations.h		\
        SgAsmJvmRuntimeInvisibleAnnotations.h			\
	SgAsmJvmSignature.h					\
	SgAsmJvmSourceFile.h					\
	SgAsmJvmStackMapFrame.h					\
	SgAsmJvmStackMapTable.h					\
	SgAsmJvmStackMapVerificationType.h			\
	SgAsmJvmSynthetic.h					\
	SgAsmLEEntryPoint.h					\
	SgAsmLEEntryTable.h					\
	SgAsmLEFileHeader.h					\
	SgAsmLENameTable.h					\
	SgAsmLEPageTableEntry.h					\
	SgAsmLEPageTable.h					\
	SgAsmLERelocTable.h					\
	SgAsmLESection.h					\
	SgAsmLESectionTableEntry.h				\
	SgAsmLESectionTable.h					\
	SgAsmM68kInstruction.h					\
	SgAsmMemoryReferenceExpression.h			\
	SgAsmMipsInstruction.h					\
	SgAsmNEEntryPoint.h					\
	SgAsmNEEntryTable.h					\
	SgAsmNEFileHeader.h					\
	SgAsmNEModuleTable.h					\
	SgAsmNENameTable.h					\
	SgAsmNERelocEntry.h					\
	SgAsmNERelocTable.h					\
	SgAsmNESection.h					\
	SgAsmNESectionTableEntry.h				\
	SgAsmNESectionTable.h					\
	SgAsmNEStringTable.h					\
	SgAsmNode.h						\
	SgAsmNullInstruction.h					\
	SgAsmOperandList.h					\
	SgAsmPEExportDirectory.h				\
	SgAsmPEExportEntry.h					\
	SgAsmPEExportEntryList.h				\
	SgAsmPEExportSection.h					\
	SgAsmPEFileHeader.h					\
	SgAsmPEImportDirectory.h				\
	SgAsmPEImportDirectoryList.h				\
	SgAsmPEImportItem.h					\
	SgAsmPEImportItemList.h					\
	SgAsmPEImportSection.h					\
	SgAsmPERVASizePair.h					\
	SgAsmPERVASizePairList.h				\
	SgAsmPESection.h					\
	SgAsmPESectionTableEntry.h				\
	SgAsmPESectionTable.h					\
	SgAsmPEStringSection.h					\
	SgAsmPointerType.h					\
	SgAsmPowerpcInstruction.h				\
	SgAsmRegisterNames.h					\
	SgAsmRegisterReferenceExpression.h			\
	SgAsmRiscOperation.h					\
	SgAsmScalarType.h					\
	SgAsmStackExpression.h					\
	SgAsmStatement.h					\
	SgAsmStaticData.h					\
	SgAsmStoredString.h					\
	SgAsmStringStorage.h					\
	SgAsmSynthesizedDataStructureDeclaration.h		\
	SgAsmSynthesizedDeclaration.h				\
	SgAsmSynthesizedFieldDeclaration.h			\
	SgAsmType.h						\
	SgAsmUnaryExpression.h					\
	SgAsmUnaryMinus.h					\
	SgAsmUnaryPlus.h					\
	SgAsmUnaryRrx.h						\
	SgAsmUnarySignedExtend.h				\
	SgAsmUnaryTruncate.h					\
	SgAsmUnaryUnsignedExtend.h				\
	SgAsmUserInstruction.h					\
	SgAsmValueExpression.h					\
	SgAsmVectorType.h					\
	SgAsmVoidType.h						\
	SgAsmX86Instruction.h
endif

# DQ (4/23/2009): This file depends upon other files
StorageClasses.lo: $(srcdir)/astFileIO/StorageClassMemoryManagement.C astFileIO/SourcesOfIRNodesAstFileIOSupport.C

haveRosettaGeneratedSource:
	cd $(top_builddir)/src/ROSETTA/src; $(MAKE)
	touch haveRosettaGeneratedSource

force-haveRosettaGeneratedSource:
	-rm Cxx_Grammar.h
	$(MAKE) haveRosettaGeneratedSource

$(GENERATED_SOURCE): haveRosettaGeneratedSource

# Rasmussen (04/17/2019): Support for ATerms has been deprecated as it is no longer needed
# and likely never fully implemented nor tested.  Files remain in the src tree but are no
# longer built.  Files atermSupport.C and nodeBuildFunctionsForAterms.C have been removed
# from libsage3Sources below (in the else clause).

if ROSE_USE_INTERNAL_FRONTEND_DEVELOPMENT
libsage3Sources = \
   Utf8.C \
   rose_attributes_list.C \
   attachPreprocessingInfo.C \
   attachPreprocessingInfoTraversal.C \
   attributeListMap.C \
   manglingSupport.C \
   fixupCopy_scopes.C \
   fixupCopy_symbols.C \
   fixupCopy_references.C \
   rose_graph_support.C \
   $(fSageSupport_la_sources)
else
libsage3Sources = \
   Utf8.C \
   rose_attributes_list.C \
   attachPreprocessingInfo.C \
   attachPreprocessingInfoTraversal.C \
   attributeListMap.C \
   manglingSupport.C \
   fixupCopy_scopes.C \
   fixupCopy_symbols.C \
   fixupCopy_references.C \
   rtiHelpers.C \
   dwarfSupport.C \
   rose_graph_support.C \
   $(fSageSupport_la_sources)
if ROSE_BUILD_CPP_LANGUAGE_SUPPORT
libsage3Sources += \
   OmpAttribute.C \
   ompFortranParser.C \
   ompAstConstruction.cpp
endif
endif

# DQ (2/15/2010): This fails in Hudson tests of ROSE compiling ROSE for code generation, but I can't 
# get it to fail in my own tests.  Skip it for now and see if there are more of these cases.
# attachPreprocessingInfo.C
# if !ROSE_USING_ROSE_CODE_GENERATION
#    libsage3Sources += attachPreprocessingInfo.C
# endif

# $(GENERATED_SOURCE) is handled separately

# DQ (5/27/2007): Files moved or removed
#   generateAST.C
#   AstAttributeDOT.C
#   astGraph.C
#   insert.C
#   stripWrapper.C
#   grammarBaseClass.C

# DQ (12/16/2008): Removed as part of rewrite of CPP and comment handling.
#   attach_all_info.C 

noinst_LTLIBRARIES = libsage3.la

libsage3_la_SOURCES = $(libsage3Sources)
if ROSE_BUILD_CPP_LANGUAGE_SUPPORT
libsage3_la_SOURCES += preproc-c.ll
libsage3_la_SOURCES += omplexer.ll ompparser.yy
endif


# DQ (3/8/2009): I think that the dependence upon $(top_builddir)/rose_config.h 
# is what was forcing a lot of files to be compiled after reruning configure.
# nodist_libsage3_la_SOURCES = $(GENERATED_SOURCE) $(top_builddir)/rose_config.h
nodist_libsage3_la_SOURCES = $(GENERATED_SOURCE)


if ROSE_USE_BOOST_WAVE
libsage3_la_LIBADD= \
  astFileIO/libastFileIO.la \
  astFixup/libastFixup.la \
  astPostProcessing/libastPostProcessing.la \
  sageInterface/libsageInterface.la \
  virtualCFG/libvirtualCFG.la \
  astFromString/libAstFromString.la \
  astVisualization/libastVisualization.la \
  astHiddenTypeAndDeclarationLists/libastHiddenTypeAndDeclarationLists.la \
  includeDirectivesProcessing/libincludeDirectivesProcessing.la \
  astTokenStream/libastTokenStream.la
else
libsage3_la_LIBADD= \
  astFileIO/libastFileIO.la \
  astFixup/libastFixup.la \
  astPostProcessing/libastPostProcessing.la \
  sageInterface/libsageInterface.la \
  virtualCFG/libvirtualCFG.la \
  astFromString/libAstFromString.la \
  astVisualization/libastVisualization.la \
  astHiddenTypeAndDeclarationLists/libastHiddenTypeAndDeclarationLists.la \
  includeDirectivesProcessing/libincludeDirectivesProcessing.la
endif

rose_attributes_list.lo : rose_attributes_list.h 

if ROSE_PCH
if ROSE_MPI
# TPS (11Feb2009): PCH only works when multithreading is off.
# We should not use PCH and MPI together.
roseh:

else
# DQ (2/11/2009): This is part of the support for Precompiled Headers (PCH) using GNU g++
roseh_v_at_0 = @
roseh_v_at_1 =
roseh_v_at_  = $(roseh_v_at_0)
roseh_v_at   = $(roseh_v_at_$(V))

roseh_v_echo_0 = @echo " COMPILE sage3basic.h.gch"
roseh_v_echo_1 =
roseh_v_echo_  = $(roseh_v_echo_0)
roseh_v_echo   = $(roseh_v_echo_$(V))

roseh:
#	DQ (2/10/2009): Rush for the off switch on precompiled header files, comment out to skip use of PCH.
#       TPS (23 Feb 2009): Hardcoded -fpic and -DPIC for now because 
#       for some reason it is used by most files although not specified on configure
	$(roseh_v_echo)
	$(roseh_v_at)$(CXX) -fPIC -DPIC $(CXXFLAGS) $(CFLAGS) $(CPPFLAGS) -g -o sage3basic.h.gch \
		$(top_srcdir)/src/frontend/SageIII/sage3basic.h -I$(top_builddir) $(ROSE_INCLUDES) 
endif
else
# default, do nothing.
roseh:

endif

test_roseh: roseh

# DQ (10/18/2007): Added AST_FILE_IO.h StorageClasses.h
# Removed sla.h (redundant with location in src/util/commandlineProcessing/sla.h)
# Rasmussen (04/17/2019): Support for ATerms has been deprecated (atermSupport.h removed)
pkginclude_HEADERS = \
   sage3.h sage3basic.h rose_attributes_list.h \
   attachPreprocessingInfo.h \
   attachPreprocessingInfoTraversal.h \
   attach_all_info.h manglingSupport.h C++_include_files.h \
   fixupCopy.h \
   general_token_defs.h rtiHelpers.h \
   OmpAttribute.h omp.h \
   omp_lib_kinds.h omp_lib.h sage3basic.hhh rosedefs.h  fileoffsetbits.h rosedll.h \
   Cxx_GrammarSerialization.h \
   $(fSageSupport_includeHeaders)

# DQ (4/5/2009): Moved rose_paths.h to src/util (where the source file is located).
nodist_pkginclude_HEADERS =			\
   Cxx_Grammar.h				\
   Cxx_GrammarDeclarations.h			\
   Cxx_GrammarDowncast.h			\
   Cxx_GrammarStorageClasses.h			\
   Cxx_GrammarSgNodeDefinitions.h		\
   Cxx_GrammarSgAsmNodeDefinitions.h		\
   Cxx_GrammarSgAsmCilNodeDefinitions.h		\
   Cxx_GrammarSgAsmDwarfNodeDefinitions.h	\
   Cxx_GrammarSgAsmJvmNodeDefinitions.h		\
   Cxx_GrammarVariants.h			\
   Cxx_GrammarVisitorSupport.h			\
   Cxx_GrammarMemoryPoolSupport.h		\
   Cxx_GrammarTreeTraversalAccessEnums.h	\
   AST_FILE_IO.h StorageClasses.h		\
   AstQueryMemoryPool.h				\
   astFileIO/AstSpecificDataManagingClass.h	\
   SgNode.h					\
   SgAsmAarch32Coprocessor.h			\
   SgAsmAarch32Instruction.h			\
   SgAsmAarch64AtOperand.h			\
   SgAsmAarch64BarrierOperand.h			\
   SgAsmAarch64CImmediateOperand.h		\
   SgAsmAarch64Instruction.h			\
   SgAsmAarch64PrefetchOperand.h		\
   SgAsmAarch64PState.h				\
   SgAsmAarch64SysMoveOperand.h			\
   SgAsmBasicString.h				\
   SgAsmBinaryAdd.h				\
   SgAsmBinaryAsr.h				\
   SgAsmBinaryConcat.h				\
   SgAsmBinaryDivide.h				\
   SgAsmBinaryExpression.h			\
   SgAsmBinaryLsl.h				\
   SgAsmBinaryLsr.h				\
   SgAsmBinaryMod.h				\
   SgAsmBinaryMsl.h				\
   SgAsmBinaryMultiply.h			\
   SgAsmBinaryPostupdate.h			\
   SgAsmBinaryPreupdate.h			\
   SgAsmBinaryRor.h				\
   SgAsmBinarySubtract.h			\
   SgAsmBlock.h					\
   SgAsmByteOrder.h				\
   SgAsmCilAssembly.h				\
   SgAsmCilAssemblyOS.h				\
   SgAsmCilAssemblyOSTable.h			\
   SgAsmCilAssemblyProcessor.h			\
   SgAsmCilAssemblyProcessorTable.h		\
   SgAsmCilAssemblyRef.h			\
   SgAsmCilAssemblyRefOS.h			\
   SgAsmCilAssemblyRefOSTable.h			\
   SgAsmCilAssemblyRefProcessor.h		\
   SgAsmCilAssemblyRefProcessorTable.h		\
   SgAsmCilAssemblyRefTable.h			\
   SgAsmCilAssemblyTable.h			\
   SgAsmCilClassLayout.h			\
   SgAsmCilClassLayoutTable.h			\
   SgAsmCilConstant.h				\
   SgAsmCilConstantTable.h			\
   SgAsmCilCustomAttribute.h			\
   SgAsmCilCustomAttributeTable.h		\
   SgAsmCilDataStream.h				\
   SgAsmCilDeclSecurity.h			\
   SgAsmCilDeclSecurityTable.h			\
   SgAsmCilErrorHeap.h				\
   SgAsmCilEvent.h				\
   SgAsmCilEventMap.h				\
   SgAsmCilEventMapTable.h			\
   SgAsmCilEventTable.h				\
   SgAsmCilExceptionData.h			\
   SgAsmCilExportedType.h			\
   SgAsmCilExportedTypeTable.h			\
   SgAsmCilField.h				\
   SgAsmCilFieldLayout.h			\
   SgAsmCilFieldLayoutTable.h			\
   SgAsmCilFieldMarshal.h			\
   SgAsmCilFieldMarshalTable.h			\
   SgAsmCilFieldRVA.h				\
   SgAsmCilFieldRVATable.h			\
   SgAsmCilFieldTable.h				\
   SgAsmCilFile.h				\
   SgAsmCilFileTable.h				\
   SgAsmCilGenericParamConstraint.h		\
   SgAsmCilGenericParamConstraintTable.h	\
   SgAsmCilGenericParam.h			\
   SgAsmCilGenericParamTable.h			\
   SgAsmCilImplMap.h				\
   SgAsmCilImplMapTable.h			\
   SgAsmCilInstruction.h			\
   SgAsmCilInterfaceImpl.h			\
   SgAsmCilInterfaceImplTable.h			\
   SgAsmCilManifestResource.h			\
   SgAsmCilManifestResourceTable.h		\
   SgAsmCilMemberRef.h				\
   SgAsmCilMemberRefTable.h			\
   SgAsmCilMetadata.h				\
   SgAsmCilMetadataHeap.h			\
   SgAsmCilMetadataRoot.h			\
   SgAsmCilMethodData.h				\
   SgAsmCilMethodDef.h				\
   SgAsmCilMethodDefTable.h			\
   SgAsmCilMethodImpl.h				\
   SgAsmCilMethodImplTable.h			\
   SgAsmCilMethodSemantics.h			\
   SgAsmCilMethodSemanticsTable.h		\
   SgAsmCilMethodSpec.h				\
   SgAsmCilMethodSpecTable.h			\
   SgAsmCilModule.h				\
   SgAsmCilModuleRef.h				\
   SgAsmCilModuleRefTable.h			\
   SgAsmCilModuleTable.h			\
   SgAsmCilNestedClass.h			\
   SgAsmCilNestedClassTable.h			\
   SgAsmCilNode.h				\
   SgAsmCilParam.h				\
   SgAsmCilParamTable.h				\
   SgAsmCilProperty.h				\
   SgAsmCilPropertyMap.h			\
   SgAsmCilPropertyMapTable.h			\
   SgAsmCilPropertyTable.h			\
   SgAsmCilStandAloneSig.h			\
   SgAsmCilStandAloneSigTable.h			\
   SgAsmCilTypeDef.h				\
   SgAsmCilTypeDefTable.h			\
   SgAsmCilTypeRef.h				\
   SgAsmCilTypeRefTable.h			\
   SgAsmCilTypeSpec.h				\
   SgAsmCilTypeSpecTable.h			\
   SgAsmCilUint32Heap.h				\
   SgAsmCilUint8Heap.h				\
   SgAsmCliHeader.h				\
   SgAsmCoffStrtab.h				\
   SgAsmCoffSymbol.h				\
   SgAsmCoffSymbolList.h			\
   SgAsmCoffSymbolTable.h			\
   SgAsmCommonSubExpression.h			\
   SgAsmConstantExpression.h			\
   SgAsmControlFlagsExpression.h		\
   SgAsmDirectRegisterExpression.h		\
   SgAsmDOSExtendedHeader.h			\
   SgAsmDOSFileHeader.h				\
   SgAsmDwarfAccessDeclaration.h		\
   SgAsmDwarfArrayType.h			\
   SgAsmDwarfBaseType.h				\
   SgAsmDwarfCatchBlock.h			\
   SgAsmDwarfClassTemplate.h			\
   SgAsmDwarfClassType.h			\
   SgAsmDwarfCommonBlock.h			\
   SgAsmDwarfCommonInclusion.h			\
   SgAsmDwarfCompilationUnit.h			\
   SgAsmDwarfCompilationUnitList.h		\
   SgAsmDwarfCondition.h			\
   SgAsmDwarfConstant.h				\
   SgAsmDwarfConstruct.h			\
   SgAsmDwarfConstructList.h			\
   SgAsmDwarfConstType.h			\
   SgAsmDwarfDwarfProcedure.h			\
   SgAsmDwarfEntryPoint.h			\
   SgAsmDwarfEnumerationType.h			\
   SgAsmDwarfEnumerator.h			\
   SgAsmDwarfFileType.h				\
   SgAsmDwarfFormalParameter.h			\
   SgAsmDwarfFormatLabel.h			\
   SgAsmDwarfFriend.h				\
   SgAsmDwarfFunctionTemplate.h			\
   SgAsmDwarfImportedDeclaration.h		\
   SgAsmDwarfImportedModule.h			\
   SgAsmDwarfImportedUnit.h			\
   SgAsmDwarfInformation.h			\
   SgAsmDwarfInheritance.h			\
   SgAsmDwarfInlinedSubroutine.h		\
   SgAsmDwarfInterfaceType.h			\
   SgAsmDwarfLabel.h				\
   SgAsmDwarfLexicalBlock.h			\
   SgAsmDwarfLine.h				\
   SgAsmDwarfLineList.h				\
   SgAsmDwarfMacro.h				\
   SgAsmDwarfMacroList.h			\
   SgAsmDwarfMember.h				\
   SgAsmDwarfModule.h				\
   SgAsmDwarfMutableType.h			\
   SgAsmDwarfNamelist.h				\
   SgAsmDwarfNamelistItem.h			\
   SgAsmDwarfNamespace.h			\
   SgAsmDwarfPackedType.h			\
   SgAsmDwarfPartialUnit.h			\
   SgAsmDwarfPointerType.h			\
   SgAsmDwarfPtrToMemberType.h			\
   SgAsmDwarfReferenceType.h			\
   SgAsmDwarfRestrictType.h			\
   SgAsmDwarfSetType.h				\
   SgAsmDwarfSharedType.h			\
   SgAsmDwarfStringType.h			\
   SgAsmDwarfStructureType.h			\
   SgAsmDwarfSubprogram.h			\
   SgAsmDwarfSubrangeType.h			\
   SgAsmDwarfSubroutineType.h			\
   SgAsmDwarfTemplateTypeParameter.h		\
   SgAsmDwarfTemplateValueParameter.h		\
   SgAsmDwarfThrownType.h			\
   SgAsmDwarfTryBlock.h				\
   SgAsmDwarfTypedef.h				\
   SgAsmDwarfUnionType.h			\
   SgAsmDwarfUnknownConstruct.h			\
   SgAsmDwarfUnspecifiedParameters.h		\
   SgAsmDwarfUnspecifiedType.h			\
   SgAsmDwarfUpcRelaxedType.h			\
   SgAsmDwarfUpcSharedType.h			\
   SgAsmDwarfUpcStrictType.h			\
   SgAsmDwarfVariable.h				\
   SgAsmDwarfVariant.h				\
   SgAsmDwarfVariantPart.h			\
   SgAsmDwarfVolatileType.h			\
   SgAsmDwarfWithStmt.h				\
   SgAsmElfDynamicEntry.h			\
   SgAsmElfDynamicEntryList.h			\
   SgAsmElfDynamicSection.h			\
   SgAsmElfEHFrameEntryCI.h			\
   SgAsmElfEHFrameEntryCIList.h			\
   SgAsmElfEHFrameEntryFD.h			\
   SgAsmElfEHFrameEntryFDList.h			\
   SgAsmElfEHFrameSection.h			\
   SgAsmElfFileHeader.h				\
   SgAsmElfNoteEntry.h				\
   SgAsmElfNoteEntryList.h			\
   SgAsmElfNoteSection.h			\
   SgAsmElfRelocEntry.h				\
   SgAsmElfRelocEntryList.h			\
   SgAsmElfRelocSection.h			\
   SgAsmElfSection.h				\
   SgAsmElfSectionTableEntry.h			\
   SgAsmElfSectionTable.h			\
   SgAsmElfSegmentTableEntry.h			\
   SgAsmElfSegmentTableEntryList.h		\
   SgAsmElfSegmentTable.h			\
   SgAsmElfStringSection.h			\
   SgAsmElfStrtab.h				\
   SgAsmElfSymbol.h				\
   SgAsmElfSymbolList.h				\
   SgAsmElfSymbolSection.h			\
   SgAsmElfSymverDefinedAux.h			\
   SgAsmElfSymverDefinedAuxList.h		\
   SgAsmElfSymverDefinedEntry.h			\
   SgAsmElfSymverDefinedEntryList.h		\
   SgAsmElfSymverDefinedSection.h		\
   SgAsmElfSymverEntry.h			\
   SgAsmElfSymverEntryList.h			\
   SgAsmElfSymverNeededAux.h			\
   SgAsmElfSymverNeededAuxList.h		\
   SgAsmElfSymverNeededEntry.h			\
   SgAsmElfSymverNeededEntryList.h		\
   SgAsmElfSymverNeededSection.h		\
   SgAsmElfSymverSection.h			\
   SgAsmExecutableFileFormat.h			\
   SgAsmExpression.h				\
   SgAsmExprListExp.h				\
   SgAsmFloatType.h				\
   SgAsmFloatValueExpression.h			\
   SgAsmFunction.h				\
   SgAsmGenericDLL.h				\
   SgAsmGenericDLLList.h			\
   SgAsmGenericFile.h				\
   SgAsmGenericFileList.h			\
   SgAsmGenericFormat.h				\
   SgAsmGenericHeader.h				\
   SgAsmGenericHeaderList.h			\
   SgAsmGenericSection.h			\
   SgAsmGenericSectionList.h			\
   SgAsmGenericString.h				\
   SgAsmGenericStrtab.h				\
   SgAsmGenericSymbol.h				\
   SgAsmGenericSymbolList.h			\
   SgAsmIndirectRegisterExpression.h		\
   SgAsmInstruction.h				\
   SgAsmInstructionList.h			\
   SgAsmIntegerType.h				\
   SgAsmIntegerValueExpression.h		\
   SgAsmInterpretation.h			\
   SgAsmInterpretationList.h			\
   SgAsmJvmAnnotationDefault.h			\
   SgAsmJvmAttribute.h				\
   SgAsmJvmAttributeTable.h			\
   SgAsmJvmBootstrapMethod.h			\
   SgAsmJvmBootstrapMethods.h			\
   SgAsmJvmClass.h				\
   SgAsmJvmCodeAttribute.h			\
   SgAsmJvmConstantPoolEntry.h			\
   SgAsmJvmConstantPool.h			\
   SgAsmJvmConstantValue.h			\
   SgAsmJvmDeprecated.h				\
   SgAsmJvmEnclosingMethod.h			\
   SgAsmJvmExceptionHandler.h			\
   SgAsmJvmExceptions.h				\
   SgAsmJvmExceptionTable.h			\
   SgAsmJvmField.h				\
   SgAsmJvmFieldTable.h				\
   SgAsmJvmFileHeader.h				\
   SgAsmJvmInnerClassesEntry.h			\
   SgAsmJvmInnerClasses.h			\
   SgAsmJvmInstruction.h			\
   SgAsmJvmLineNumberEntry.h			\
   SgAsmJvmLineNumberTable.h			\
   SgAsmJvmLocalVariableEntry.h			\
   SgAsmJvmLocalVariableTable.h			\
   SgAsmJvmLocalVariableTypeEntry.h		\
   SgAsmJvmLocalVariableTypeTable.h		\
   SgAsmJvmMethod.h				\
   SgAsmJvmMethodParametersEntry.h		\
   SgAsmJvmMethodParameters.h			\
   SgAsmJvmMethodTable.h			\
   SgAsmJvmModuleMainClass.h			\
   SgAsmJvmNestHost.h				\
   SgAsmJvmNestMembers.h			\
   SgAsmJvmNode.h				\
   SgAsmJvmRuntimeAnnotation.h			\
   SgAsmJvmRuntimeAnnotationPair.h		\
   SgAsmJvmRuntimeAnnotationValue.h		\
   SgAsmJvmRuntimeParameterAnnotation.h 	\
   SgAsmJvmRuntimeVisibleAnnotations.h		\
   SgAsmJvmRuntimeVisibilityParamAnnotations.h	\
   SgAsmJvmRuntimeInvisibleAnnotations.h	\
   SgAsmJvmSignature.h				\
   SgAsmJvmSourceFile.h				\
   SgAsmJvmStackMapFrame.h			\
   SgAsmJvmStackMapTable.h			\
   SgAsmJvmStackMapVerificationType.h		\
   SgAsmJvmSynthetic.h				\
   SgAsmLEEntryPoint.h				\
   SgAsmLEEntryTable.h				\
   SgAsmLEFileHeader.h				\
   SgAsmLENameTable.h				\
   SgAsmLEPageTableEntry.h			\
   SgAsmLEPageTable.h				\
   SgAsmLERelocTable.h				\
   SgAsmLESection.h				\
   SgAsmLESectionTableEntry.h			\
   SgAsmLESectionTable.h			\
   SgAsmM68kInstruction.h			\
   SgAsmMemoryReferenceExpression.h		\
   SgAsmMipsInstruction.h			\
   SgAsmNEEntryPoint.h				\
   SgAsmNEEntryTable.h				\
   SgAsmNEFileHeader.h				\
   SgAsmNEModuleTable.h				\
   SgAsmNENameTable.h				\
   SgAsmNERelocEntry.h				\
   SgAsmNERelocTable.h				\
   SgAsmNESection.h				\
   SgAsmNESectionTableEntry.h			\
   SgAsmNESectionTable.h			\
   SgAsmNEStringTable.h				\
   SgAsmNode.h					\
   SgAsmNullInstruction.h			\
   SgAsmOperandList.h				\
   SgAsmPEExportDirectory.h			\
   SgAsmPEExportEntry.h				\
   SgAsmPEExportEntryList.h			\
   SgAsmPEExportSection.h			\
   SgAsmPEFileHeader.h				\
   SgAsmPEImportDirectory.h			\
   SgAsmPEImportDirectoryList.h			\
   SgAsmPEImportItem.h				\
   SgAsmPEImportItemList.h			\
   SgAsmPEImportSection.h			\
   SgAsmPERVASizePair.h				\
   SgAsmPERVASizePairList.h			\
   SgAsmPESection.h				\
   SgAsmPESectionTableEntry.h			\
   SgAsmPESectionTable.h			\
   SgAsmPEStringSection.h			\
   SgAsmPowerpcInstruction.h			\
   SgAsmPointerType.h				\
   SgAsmRegisterNames.h				\
   SgAsmRegisterReferenceExpression.h		\
   SgAsmRiscOperation.h				\
   SgAsmScalarType.h				\
   SgAsmStackExpression.h			\
   SgAsmStatement.h				\
   SgAsmStaticData.h				\
   SgAsmStoredString.h				\
   SgAsmStringStorage.h				\
   SgAsmSynthesizedDataStructureDeclaration.h	\
   SgAsmSynthesizedDeclaration.h		\
   SgAsmSynthesizedFieldDeclaration.h		\
   SgAsmType.h					\
   SgAsmUnaryExpression.h			\
   SgAsmUnaryMinus.h				\
   SgAsmUnaryPlus.h				\
   SgAsmUnaryRrx.h				\
   SgAsmUnarySignedExtend.h			\
   SgAsmUnaryTruncate.h				\
   SgAsmUnaryUnsignedExtend.h			\
   SgAsmUserInstruction.h			\
   SgAsmValueExpression.h			\
   SgAsmVectorType.h				\
   SgAsmVoidType.h				\
   SgAsmX86Instruction.h

libRoseTraits_includedir = $(prefix)/include/rose/Rose/Traits
libRoseTraits_include_HEADERS = Rose/Traits/generated.h

BUILT_SOURCES = $(GENERATED_SOURCE)
if ROSE_BUILD_CPP_LANGUAGE_SUPPORT
if ROSE_USE_INTERNAL_FRONTEND_DEVELOPMENT
else
BUILT_SOURCES += ompparser.cc ompparser.h omplexer.cc
endif
endif

# DQ (9/9/2007): Put C++_include_files.h back into place
# since it is a convinient mechanism to handle included headers 
# in the Cxx_Grammar.C file (a ROSETTA generated file).
# DQ (5/27/2007): Files moved or removed
# grammarBaseClass.h 
# AstAttributeDOT.h
# astGraph.h
# astGraphTemplate.C
# C++_include_files.h

clean-local:
	rm -rf Templates.DB ii_files ti_files cxx_templates
	rm -rf Cxx_Grammar* AST_FILE_IO.C StorageClasses.C
	rm -rf AST_FILE_IO.h StorageClasses.h AstQueryMemoryPool.h
	rm -rf generated_abstractcppgrammar.atg
	rm -f sage3basic.h.gch
	rm -f *.binary

distclean-local:
	rm -rf Templates.DB
	rm -f sage3basic.h.gch

removeHashLineDirectivesFromGeneratedCode:
	cp Cxx_Grammar.h  Cxx_Grammar.h.withLineDirectives
	grep -v "#line" Cxx_Grammar.h > Cxx_Grammar.h.withoutLineDirectives
	cp Cxx_Grammar.h.withoutLineDirectives Cxx_Grammar.h
